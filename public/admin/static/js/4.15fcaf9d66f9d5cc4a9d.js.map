{"version":3,"sources":["webpack:///static/js/4.15fcaf9d66f9d5cc4a9d.js","webpack:///./src/views/hotel/commoditySetting.vue","webpack:///commoditySetting.vue","webpack:///./src/views/hotel/commoditySetting.vue?2c38","webpack:///./src/views/hotel/commoditySetting.vue?10e3","webpack:///./src/views/hotel/commoditySetting.vue?999b"],"names":["webpackJsonp","535","module","exports","__webpack_require__","Component","543","Object","defineProperty","value","_axios","_axios2","obj","__esModule","default","data","user","addCategoryName","activeName2","commodities","commoditiyDetails","isAdd","uploadform","token","ruleForm","name","img","price","unit","putaway","rules","required","message","trigger","methods","addCategory","categoryName","this","details","push","removeTab","item","_this2","$confirm","confirmButtonText","cancelButtonText","type","then","index","splice","saveData","catch","handleClick","tab","event","console","log","showCommodity","deleteCommodity","_index","$index","addNewCommoditiy","resetForm","succ","res","_this","$message","text","error","commodityList","forEach","id","ite","inde","ajax","http","host","baseUrl","submitForm","formName","_this3","$refs","validate","valid","handleAvatarSuccess","response","file","fileList","imgBaseUrl","key","beforeAvatarUpload","isLt2M","size","params","fileName","get","code","result","uploadToken","init","JSON","parse","sessionStorage","getItem","userid","mounted","554","i","version","sources","names","mappings","sourcesContent","sourceRoot","562","content","locals","571","render","_vm","_h","$createElement","_c","_self","attrs","label-width","staticStyle","width","placeholder","nativeOn","keyup","$event","_k","keyCode","model","callback","$$v","expression","_v","transform","disabled","length","on","click","margin-top","closable","tab-click","tab-remove","_l","label","height","border","prop","scopedSlots","_u","fn","scope","row","align","_e","directives","rawName","staticClass","ref","$set","margin-bottom","action","show-file-list","on-success","before-upload","src","position","staticRenderFns"],"mappings":"AAAAA,cAAc,IAERC,IACA,SAAUC,EAAQC,EAASC,GCDjCA,EAAA,IAEA,IAAAC,GAAAD,EAAA,IAEAA,EAAA,KAEAA,EAAA,KAEA,KAEA,KAGAF,GAAAC,QAAAE,EAAAF,SDUMG,IACA,SAAUJ,EAAQC,EAASC,GAEjC,YAGAG,QAAOC,eAAeL,EAAS,cAC9BM,OAAO,GE4CR,IAAAC,GAAAN,EAAA,KFvCIO,EAEJ,SAAgCC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,IAFlDF,EAIrCP,GAAQW,SACPC,KAAM,WACL,OACCC,QACAD,QACAE,gBEoCH,GFnCGC,YEoCH,IFnCGC,eACAC,mBEoCH,EFnCGC,OEoCH,EFnCGC,YACCC,MEqCJ,IFnCGC,UACCC,KEoCJ,GFnCIC,IEoCJ,GFnCIC,MEoCJ,GFnCIC,KEoCJ,GFnCIC,QEqCJ,IFnCGC,OACCL,OEoCJM,UAAA,EAAAC,QAAA,UAAAC,QAEA,SFrCIP,MEsCJK,UAAA,EAAAC,QAAA,eAAAC,QAEA,SFvCIN,QEwCJI,UAAA,EAAAC,QAAA,UAAAC,QAEA,SFzCIL,OE0CJG,UAAA,EAAAC,QAAA,UAAAC,QAIA,YFzCCC,SACCC,YAAa,WACZ,GAAIvB,IACHwB,aAAcC,KE2ClBpB,gBF1CIqB,WAEDD,MAAKlB,YAAYoB,KE4CpB3B,IF1CE4B,UAAW,SAAmBC,GE4ChC,GAAAC,GAAAL,IFzCGA,MAAKM,SAAS,2BAA4B,MACzCC,kBE0CJ,KFzCIC,iBE0CJ,KFzCIC,KE0CJ,YAHAC,KAAA,WFrCI,GAAIC,GAAQP,EE0ChB,CFzCIC,GAAOvB,YAAY8B,OAAOD,EE0C9B,GFzCIN,EE0CJQ,aFzCMC,MAAM,eAEVC,YAAa,SAAqBC,EAAKC,GACtCC,QAAQC,IE2CXH,GF1CGE,QAAQC,IAAInB,KE2CfnB,aF1CGmB,KAAKjB,mBE2CR,EF1CGiB,KAAKhB,OE2CR,GFzCEoC,cAAe,SAAuBhB,GACrCJ,KAAKb,SE2CRiB,EF1CGJ,KAAKjB,mBE2CR,EF1CGiB,KAAKhB,OE2CR,GFzCEqC,gBAAiB,SAAyBjB,GACzC,GAAIkB,GAAStB,KAAKnB,YE2CrB,EF1CO8B,EAAQP,EE6CfmB,MF1CGvB,MAAKlB,YAAYwC,GAAQrB,QAAQW,OAAOD,EE2C3C,GF1CGX,KE2CHa,YFzCEW,iBAAkB,WACjBxB,KE2CHyB,YF1CGzB,KAAKjB,mBE2CR,EF1CGiB,KAAKhB,OE2CR,GFzCE6B,SAAU,WAQT,QAASa,GAAKC,GACbC,EAAMC,UACLlC,QAASgC,EE4CdG,KF3CKrB,KE6CL,YF3CImB,EAAM7C,mBE4CV,EFzCG,QAASgD,GAAMJ,GACdT,QAAQC,IE4CZQ,GF5DG3B,KAAKtB,KAAKsD,cAAcC,QAAQ,SAAU7B,EAAMO,GAC/CP,EAAK8B,GAAK,GE2CdvB,EAAAP,EAAAH,QAAAgC,QAAA,SAAAE,EAAAC,GF1CKD,EAAID,GAAKvB,EAAQ,IE4CtByB,MFzCGpC,KAAKqC,KAAKC,KAAK,MAAOtC,KAAKuC,KAAKC,QAAU,mBAAoBxC,KAAKtB,KAAMgD,EE4C5EK,EF3CG,IAAIH,GE4CP5B,MF/BEyC,WAAY,SAAoBC,GE4ClC,GAAAC,GAAA3C,IFzCGA,MAAK4C,MAAMF,GAAUG,SAAS,SAAUC,GACvC,IAAIA,EAOH,MADA5B,SAAQC,IE0Cb,mBACA,CFhDSwB,GAAO3D,OACV2D,EAAO7D,YAAY6D,EAAO9D,YAAc,GAAGoB,QAAQC,KAAKyC,EE0C9DxD,UFxCKwD,EE0CL9B,cFnCEY,UAAW,SAAmBiB,GAC7B1C,KAAKb,UACJC,KE0CJ,GFzCIC,IE0CJ,GFzCIC,ME0CJ,GFzCIC,KE0CJ,GFzCIC,SE2CJ,GFzCGQ,KAAKjB,mBE0CR,EFzCGiB,KAAKhB,OE0CR,GFxCE+D,oBAAqB,SAA6BC,EAAUC,EAAMC,GACjElD,KAAKb,SAASE,IAAM,GAAKW,KAAKuC,KAAKY,WAAaH,EE0CnDI,KFxCEC,mBAAoB,SAA4BJ,GAC/C,GAAIK,GAASL,EAAKM,KAAO,KAAO,KE0CnC,EFzCO3B,EE2CP5B,IFzCG,IAAKsD,EE4CR,CFzCI,GAAIE,IACHC,SAAUR,EE4Cf7D,KFzCI,OAAOd,GAAQG,QAAQiF,IAAI9B,EAAMW,KAAKC,QAAU,cE2CpDgB,WAAA9C,KAAA,SAAAiB,GF1C2B,MAAlBA,EAAIjD,KAAKiF,KACZ/B,EAAM3C,YACLmE,IAAKzB,EAAIjD,KAAKkF,OE4CrBH,SF3COvE,MAAOyC,EAAIjD,KAAKkF,OE6CvBC,aF1CMjC,EAAMC,SAASE,ME4CrB,YATAjB,MAAA,WFhCKc,EAAMC,SAASE,ME6CpB,YFzCG,MApBCH,GAAMC,SAASE,ME0CnB,mBAuBAuB,GF3CEQ,KAAM,WAIL,QAASpC,GAAKC,GACb,GAAIjD,GAAOiD,EE6CfjD,IF5CIkD,GAAMlD,KE8CVA,EF5CIwC,QAAQC,IE6CZ,MF5CIS,EAAM9C,YAAcJ,EE6CxBsD,cF3CG,QAASD,GAAMJ,GACdT,QAAQC,IE6CZQ,GFxDG3B,KAAKrB,KAAOoF,KAAKC,MAAMC,eAAeC,QE6CzC,SF5CGlE,KAAKqC,KAAKC,KAAK,MAAOtC,KAAKuC,KAAKC,QAAU,oBAAsB2B,OAAQnE,KAAKrB,KAAKwF,QAAUzC,EE6C/FK,EF5CG,IAAIH,GE6CP5B,OFhCCoE,QAAS,WACRpE,KE8CF8D,UFxCMO,IACA,SAAUxG,EAAQC,EAASC,GGvNjCD,EAAAD,EAAAC,QAAAC,EAAA,OAKAD,EAAAoC,MAAArC,EAAAyG,EAAA,0NAAiP,IAAQC,QAAA,EAAAC,SAAA,gFAAAC,SAAAC,SAAA,wIAAAzB,KAAA,uBAAA0B,gBAAA,2RAA2kBC,WAAA,OHgO9zBC,IACA,SAAUhH,EAAQC,EAASC,GInOjC,GAAA+G,GAAA/G,EAAA,IACA,iBAAA+G,SAAAjH,EAAAyG,EAAAQ,EAAA,MACAA,EAAAC,SAAAlH,EAAAC,QAAAgH,EAAAC,OAEAhH,GAAA,gBAAA+G,GAAA,IJ4OME,IACA,SAAUnH,EAAQC,GKpPxBD,EAAAC,SAAgBmH,OAAA,WAAmB,GAAAC,GAAAlF,KAAamF,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,WAAAA,EAAA,OACAE,OACAC,cAAA,UAEGH,EAAA,OAAAA,EAAA,YACHI,aACAC,MAAA,SAEAH,OACAI,YAAA,aAEAC,UACAC,MAAA,SAAAC,GACA,eAAAA,KAAAZ,EAAAa,GAAAD,EAAAE,QAAA,WAAAF,EAAA1C,KAAuF,WACvF8B,GAAApF,YAAAgG,KAGAG,OACA7H,MAAA8G,EAAA,gBACAgB,SAAA,SAAAC,GACAjB,EAAAtG,gBAAAuH,GAEAC,WAAA,qBAEGlB,EAAAmB,GAAA,KAAAhB,EAAA,aACHI,aACAa,UAAA,oBAEAf,OACA9E,KAAA,UACA8F,SAAA,IAAArB,EAAAtG,gBAAA4H,QAEAC,IACAC,MAAAxB,EAAApF,eAEGoF,EAAAmB,GAAA,gBAAAnB,EAAAmB,GAAA,KAAAhB,EAAA,WACHI,aACAkB,aAAA,QAEApB,OACA9E,KAAA,OACAmG,SAAA,IAEAH,IACAI,YAAA3B,EAAAnE,YACA+F,aAAA5B,EAAA/E,WAEA8F,OACA7H,MAAA8G,EAAA,YACAgB,SAAA,SAAAC,GACAjB,EAAArG,YAAAsH,GAEAC,WAAA,iBAEGlB,EAAA6B,GAAA7B,EAAA,qBAAA9E,EAAAO,GACH,MAAA0E,GAAA,eACAjC,IAAAzC,EACA4E,OACAyB,MAAA5G,EAAAL,aACAX,KAAA,GAAAuB,KAEKP,EAAAH,QAAAuG,OAAA,EAAAnB,EAAA,OACLI,aACAC,MAAA,WAEKL,EAAA,YACLI,aACAC,MAAA,QAEAH,OACA7G,KAAA0B,EAAAH,QACAgH,OAAA,MACAC,OAAA,MAEK7B,EAAA,mBACLE,OACA4B,KAAA,OACAH,MAAA,UAEK9B,EAAAmB,GAAA,KAAAhB,EAAA,mBACLE,OACA4B,KAAA,QACAH,MAAA,KACAtB,MAAA,QAEKR,EAAAmB,GAAA,KAAAhB,EAAA,mBACLE,OACA4B,KAAA,OACAH,MAAA,KACAtB,MAAA,QAEKR,EAAAmB,GAAA,KAAAhB,EAAA,mBACLE,OACA4B,KAAA,UACAH,MAAA,OACAtB,MAAA,MAEA0B,YAAAlC,EAAAmC,KACAjE,IAAA,UACAkE,GAAA,SAAAC,GACA,OAAAA,EAAAC,IAAA,QAAAnC,EAAA,OAAAH,EAAAmB,GAAA,2CAAAhB,EAAA,OAAAH,EAAAmB,GAAA,kDAGKnB,EAAAmB,GAAA,KAAAhB,EAAA,mBACLE,OACAyB,MAAA,KACAS,MAAA,SACA/B,MAAA,OAEA0B,YAAAlC,EAAAmC,KACAjE,IAAA,UACAkE,GAAA,SAAAC,GACA,OAAAlC,EAAA,aACAE,OACA9E,KAAA,OACA8C,KAAA,SAEAkD,IACAC,MAAA,SAAAZ,GACAZ,EAAA9D,cAAAmG,EAAAC,SAGWtC,EAAAmB,GAAA,WAAAnB,EAAAmB,GAAA,KAAAhB,EAAA,aACXE,OACA9E,KAAA,OACA8C,KAAA,SAEAkD,IACAC,MAAA,SAAAZ,GACAZ,EAAA7D,gBAAAkG,OAGWrC,EAAAmB,GAAA,gBAGN,OAAAnB,EAAAwC,KAAAxC,EAAAmB,GAAA,KAAAhB,EAAA,aACLI,aACAkB,aAAA,QAEApB,OACA9E,KAAA,WAEAgG,IACAC,MAAAxB,EAAA1D,oBAEK0D,EAAAmB,GAAA,gBACFnB,EAAAmB,GAAA,KAAAhB,EAAA,OACHsC,aACAvI,KAAA,OACAwI,QAAA,SACAxJ,MAAA8G,EAAA,kBACAkB,WAAA,sBAEAyB,YAAA,qBACApC,aACAC,MAAA,QACAiB,aAAA,UAEGtB,EAAA,WACHyC,IAAA,WACAD,YAAA,gBACAtC,OACAU,MAAAf,EAAA/F,SACAM,MAAAyF,EAAAzF,MACA+F,cAAA,WAEGH,EAAA,gBACHE,OACAyB,MAAA,QACAG,KAAA,UAEG9B,EAAA,YACHI,aACAC,MAAA,SAEAH,OACAI,YAAA,UAEAM,OACA7H,MAAA8G,EAAA/F,SAAA,KACA+G,SAAA,SAAAC,GACAjB,EAAA6C,KAAA7C,EAAA/F,SAAA,OAAAgH,IAEAC,WAAA,oBAEG,GAAAlB,EAAAmB,GAAA,KAAAhB,EAAA,gBACHwC,YAAA,gBACApC,aACAuC,gBAAA,QAEAzC,OACAyB,MAAA,QACAG,KAAA,SAEG9B,EAAA,aACHwC,YAAA,kBACAtC,OACA0C,OAAA,gBACAC,kBAAA,EACAxJ,KAAAwG,EAAAjG,WACAkJ,aAAAjD,EAAAnC,oBACAqF,gBAAAlD,EAAA7B,sBAEG6B,EAAA/F,SAAA,IAAAkG,EAAA,OACHwC,YAAA,SACAtC,OACA8C,IAAAnD,EAAA/F,SAAAE,OAEGgG,EAAA,KACHwC,YAAA,wCACG3C,EAAAmB,GAAA,KAAAhB,EAAA,YACHI,aACA6C,SAAA,WACA3B,aAAA,OACAjB,MAAA,SAEAH,OACAI,YAAA,UAEAM,OACA7H,MAAA8G,EAAA/F,SAAA,IACA+G,SAAA,SAAAC,GACAjB,EAAA6C,KAAA7C,EAAA/F,SAAA,MAAAgH,IAEAC,WAAA,kBAEGlB,EAAAmB,GAAA,KAAAhB,EAAA,KAAAH,EAAAmB,GAAA,0CAAAnB,EAAAmB,GAAA,KAAAhB,EAAA,gBACHE,OACAyB,MAAA,QACAG,KAAA,WAEG9B,EAAA,YACHI,aACAC,MAAA,SAEAH,OACAI,YAAA,UAEAM,OACA7H,MAAA8G,EAAA/F,SAAA,MACA+G,SAAA,SAAAC,GACAjB,EAAA6C,KAAA7C,EAAA/F,SAAA,QAAAgH,IAEAC,WAAA,oBAEGlB,EAAAmB,GAAA,sBAAAnB,EAAAmB,GAAA,KAAAhB,EAAA,gBACHE,OACAyB,MAAA,QACAG,KAAA,UAEG9B,EAAA,YACHI,aACAC,MAAA,SAEAH,OACAI,YAAA,UAEAM,OACA7H,MAAA8G,EAAA/F,SAAA,KACA+G,SAAA,SAAAC,GACAjB,EAAA6C,KAAA7C,EAAA/F,SAAA,OAAAgH,IAEAC,WAAA,mBAEGlB,EAAAmB,GAAA,uCAAAnB,EAAAmB,GAAA,KAAAhB,EAAA,gBACHE,OACAyB,MAAA,QACAG,KAAA,aAEG9B,EAAA,aACHY,OACA7H,MAAA8G,EAAA/F,SAAA,QACA+G,SAAA,SAAAC,GACAjB,EAAA6C,KAAA7C,EAAA/F,SAAA,UAAAgH,IAEAC,WAAA,uBAEG,GAAAlB,EAAAmB,GAAA,KAAAhB,EAAA,gBAAAA,EAAA,aACHE,OACA9E,KAAA,WAEAgG,IACAC,MAAA,SAAAZ,GACAZ,EAAAzC,WAAA,gBAGGyC,EAAAmB,GAAA,QAAAnB,EAAAmB,GAAA,KAAAhB,EAAA,aACHoB,IACAC,MAAAxB,EAAAzD,aAEGyD,EAAAmB,GAAA,6BACFkC","file":"static/js/4.15fcaf9d66f9d5cc4a9d.js","sourcesContent":["webpackJsonp([4],{\n\n/***/ 535:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(562)\n\nvar Component = __webpack_require__(67)(\n  /* script */\n  __webpack_require__(543),\n  /* template */\n  __webpack_require__(571),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 543:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _axios = __webpack_require__(139);\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n\tdata: function data() {\n\t\treturn {\n\t\t\tuser: {},\n\t\t\tdata: {},\n\t\t\taddCategoryName: '',\n\t\t\tactiveName2: '0',\n\t\t\tcommodities: [],\n\t\t\tcommoditiyDetails: false,\n\t\t\tisAdd: true,\n\t\t\tuploadform: {\n\t\t\t\ttoken: \"\"\n\t\t\t},\n\t\t\truleForm: {\n\t\t\t\tname: '',\n\t\t\t\timg: '',\n\t\t\t\tprice: '',\n\t\t\t\tunit: '',\n\t\t\t\tputaway: ''\n\t\t\t},\n\t\t\trules: {\n\t\t\t\tname: [{ required: true, message: '请输入商品名称', trigger: 'blur' }],\n\t\t\t\timg: [{ required: true, message: '请上传图片或填写图片地址', trigger: 'blur' }],\n\t\t\t\tprice: [{ required: true, message: '请输入商品价格', trigger: 'blur' }],\n\t\t\t\tunit: [{ required: true, message: '请输入价格单位', trigger: 'blur' }]\n\t\t\t}\n\t\t};\n\t},\n\n\tmethods: {\n\t\taddCategory: function addCategory() {\n\t\t\tvar obj = {\n\t\t\t\tcategoryName: this.addCategoryName,\n\t\t\t\tdetails: []\n\t\t\t};\n\t\t\tthis.commodities.push(obj);\n\t\t},\n\t\tremoveTab: function removeTab(item) {\n\t\t\tvar _this2 = this;\n\n\t\t\tthis.$confirm('此操作将会删除该种类及其下所有商品, 是否继续?', '提示', {\n\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\ttype: 'warning'\n\t\t\t}).then(function () {\n\t\t\t\tvar index = item - 0;\n\t\t\t\t_this2.commodities.splice(index, 1);\n\t\t\t\t_this2.saveData();\n\t\t\t}).catch(function () {});\n\t\t},\n\t\thandleClick: function handleClick(tab, event) {\n\t\t\tconsole.log(tab);\n\t\t\tconsole.log(this.activeName2);\n\t\t\tthis.commoditiyDetails = false;\n\t\t\tthis.isAdd = true;\n\t\t},\n\t\tshowCommodity: function showCommodity(item) {\n\t\t\tthis.ruleForm = item;\n\t\t\tthis.commoditiyDetails = true;\n\t\t\tthis.isAdd = false;\n\t\t},\n\t\tdeleteCommodity: function deleteCommodity(item) {\n\t\t\tvar _index = this.activeName2 - 0;\n\t\t\tvar index = item.$index;\n\n\n\t\t\tthis.commodities[_index].details.splice(index, 1);\n\t\t\tthis.saveData();\n\t\t},\n\t\taddNewCommoditiy: function addNewCommoditiy() {\n\t\t\tthis.resetForm();\n\t\t\tthis.commoditiyDetails = true;\n\t\t\tthis.isAdd = true;\n\t\t},\n\t\tsaveData: function saveData() {\n\t\t\tthis.data.commodityList.forEach(function (item, index) {\n\t\t\t\titem.id = '' + index, item.details.forEach(function (ite, inde) {\n\t\t\t\t\tite.id = index + '-' + inde;\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.ajax.http('put', this.host.baseUrl + '/baseinfosetting', this.data, succ, error);\n\t\t\tvar _this = this;\n\t\t\tfunction succ(res) {\n\t\t\t\t_this.$message({\n\t\t\t\t\tmessage: res.text,\n\t\t\t\t\ttype: 'success'\n\t\t\t\t});\n\t\t\t\t_this.commoditiyDetails = false;\n\t\t\t}\n\n\t\t\tfunction error(res) {\n\t\t\t\tconsole.log(res);\n\t\t\t}\n\t\t},\n\t\tsubmitForm: function submitForm(formName) {\n\t\t\tvar _this3 = this;\n\n\t\t\tthis.$refs[formName].validate(function (valid) {\n\t\t\t\tif (valid) {\n\t\t\t\t\tif (_this3.isAdd) {\n\t\t\t\t\t\t_this3.commodities[_this3.activeName2 - 0].details.push(_this3.ruleForm);\n\t\t\t\t\t}\n\t\t\t\t\t_this3.saveData();\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('error submit!!');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tresetForm: function resetForm(formName) {\n\t\t\tthis.ruleForm = {\n\t\t\t\tname: '',\n\t\t\t\timg: '',\n\t\t\t\tprice: '',\n\t\t\t\tunit: '',\n\t\t\t\tputaway: true\n\t\t\t};\n\t\t\tthis.commoditiyDetails = false;\n\t\t\tthis.isAdd = true;\n\t\t},\n\t\thandleAvatarSuccess: function handleAvatarSuccess(response, file, fileList) {\n\t\t\tthis.ruleForm.img = '' + this.host.imgBaseUrl + response.key;\n\t\t},\n\t\tbeforeAvatarUpload: function beforeAvatarUpload(file) {\n\t\t\tvar isLt2M = file.size / 1024 / 1024 < 1;\n\t\t\tvar _this = this;\n\n\t\t\tif (!isLt2M) {\n\t\t\t\t_this.$message.error(\"上传图片大小不能超过 1MB!\");\n\t\t\t} else {\n\t\t\t\tvar params = {\n\t\t\t\t\tfileName: file.name\n\t\t\t\t};\n\n\t\t\t\treturn _axios2.default.get(_this.host.baseUrl + \"/uploadimg\", { params: params }).then(function (res) {\n\t\t\t\t\tif (res.data.code === \"1\") {\n\t\t\t\t\t\t_this.uploadform = {\n\t\t\t\t\t\t\tkey: res.data.result.fileName,\n\t\t\t\t\t\t\ttoken: res.data.result.uploadToken\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this.$message.error(\"上传图片失败\");\n\t\t\t\t\t}\n\t\t\t\t}).catch(function () {\n\t\t\t\t\t_this.$message.error(\"上传图片失败\");\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn isLt2M;\n\t\t},\n\t\tinit: function init() {\n\t\t\tthis.user = JSON.parse(sessionStorage.getItem('user'));\n\t\t\tthis.ajax.http('get', this.host.baseUrl + '/baseinfosetting', { userid: this.user.userid }, succ, error);\n\t\t\tvar _this = this;\n\t\t\tfunction succ(res) {\n\t\t\t\tvar data = res.data;\n\t\t\t\t_this.data = data;\n\n\t\t\t\tconsole.log('赋值');\n\t\t\t\t_this.commodities = data.commodityList;\n\t\t\t}\n\t\t\tfunction error(res) {\n\t\t\t\tconsole.log(res);\n\t\t\t}\n\t\t}\n\t},\n\tmounted: function mounted() {\n\t\tthis.init();\n\t}\n};\n\n/***/ }),\n\n/***/ 554:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(530)();\n// imports\n\n\n// module\nexports.push([module.i, \".commodity-img .avatar-uploader-icon{font-size:28px;color:#8c939d;width:150px;height:150px;line-height:150px;text-align:center;border:1px dashed #8c939d}.commodity-img .avatar{width:150px;height:150px;display:block}\", \"\", {\"version\":3,\"sources\":[\"/Users/wei/codespace/www/hy/hotel-admin/src/views/hotel/commoditySetting.vue\"],\"names\":[],\"mappings\":\"AACA,qCACE,eAAgB,AAChB,cAAe,AACf,YAAa,AACb,aAAc,AACd,kBAAmB,AACnB,kBAAmB,AACnB,yBAA2B,CAC5B,AACD,uBACE,YAAa,AACb,aAAc,AACd,aAAe,CAChB\",\"file\":\"commoditySetting.vue\",\"sourcesContent\":[\"\\n.commodity-img .avatar-uploader-icon {\\n  font-size: 28px;\\n  color: #8c939d;\\n  width: 150px;\\n  height: 150px;\\n  line-height: 150px;\\n  text-align: center;\\n  border: 1px dashed #8c939d;\\n}\\n.commodity-img .avatar {\\n  width: 150px;\\n  height: 150px;\\n  display: block;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 562:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(554);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(531)(\"46b0ed8c\", content, true);\n\n/***/ }),\n\n/***/ 571:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('section', [_c('div', {\n    attrs: {\n      \"label-width\": \"80px\"\n    }\n  }, [_c('div', [_c('el-input', {\n    staticStyle: {\n      \"width\": \"300px\"\n    },\n    attrs: {\n      \"placeholder\": \"请输入商品类别名称\"\n    },\n    nativeOn: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13, $event.key)) { return null; }\n        _vm.addCategory($event)\n      }\n    },\n    model: {\n      value: (_vm.addCategoryName),\n      callback: function($$v) {\n        _vm.addCategoryName = $$v\n      },\n      expression: \"addCategoryName\"\n    }\n  }), _vm._v(\" \"), _c('el-button', {\n    staticStyle: {\n      \"transform\": \"translateY(-1px)\"\n    },\n    attrs: {\n      \"type\": \"primary\",\n      \"disabled\": _vm.addCategoryName.length === 0\n    },\n    on: {\n      \"click\": _vm.addCategory\n    }\n  }, [_vm._v(\"添加类别\")])], 1)]), _vm._v(\" \"), _c('el-tabs', {\n    staticStyle: {\n      \"margin-top\": \"30px\"\n    },\n    attrs: {\n      \"type\": \"card\",\n      \"closable\": \"\"\n    },\n    on: {\n      \"tab-click\": _vm.handleClick,\n      \"tab-remove\": _vm.removeTab\n    },\n    model: {\n      value: (_vm.activeName2),\n      callback: function($$v) {\n        _vm.activeName2 = $$v\n      },\n      expression: \"activeName2\"\n    }\n  }, [_vm._l((_vm.commodities), function(item, index) {\n    return _c('el-tab-pane', {\n      key: index,\n      attrs: {\n        \"label\": item.categoryName,\n        \"name\": (\"\" + index)\n      }\n    }, [(item.details.length > 0) ? _c('div', {\n      staticStyle: {\n        \"width\": \"700px\"\n      }\n    }, [_c('el-table', {\n      staticStyle: {\n        \"width\": \"100%\"\n      },\n      attrs: {\n        \"data\": item.details,\n        \"height\": \"300\",\n        \"border\": \"\"\n      }\n    }, [_c('el-table-column', {\n      attrs: {\n        \"prop\": \"name\",\n        \"label\": \"商品名称\"\n      }\n    }), _vm._v(\" \"), _c('el-table-column', {\n      attrs: {\n        \"prop\": \"price\",\n        \"label\": \"单价\",\n        \"width\": \"80\"\n      }\n    }), _vm._v(\" \"), _c('el-table-column', {\n      attrs: {\n        \"prop\": \"unit\",\n        \"label\": \"单位\",\n        \"width\": \"80\"\n      }\n    }), _vm._v(\" \"), _c('el-table-column', {\n      attrs: {\n        \"prop\": \"putaway\",\n        \"label\": \"上架状态\",\n        \"width\": \"80\"\n      },\n      scopedSlots: _vm._u([{\n        key: \"default\",\n        fn: function(scope) {\n          return [(scope.row.putaway) ? _c('div', [_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t是\\n\\t\\t\\t\\t\\t\\t\\t\\t\")]) : _c('div', [_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t否\\n\\t\\t\\t\\t\\t\\t\\t\\t\")])]\n        }\n      }])\n    }), _vm._v(\" \"), _c('el-table-column', {\n      attrs: {\n        \"label\": \"操作\",\n        \"align\": \"center\",\n        \"width\": \"120\"\n      },\n      scopedSlots: _vm._u([{\n        key: \"default\",\n        fn: function(scope) {\n          return [_c('el-button', {\n            attrs: {\n              \"type\": \"text\",\n              \"size\": \"small\"\n            },\n            on: {\n              \"click\": function($event) {\n                _vm.showCommodity(scope.row)\n              }\n            }\n          }, [_vm._v(\"查看/修改\")]), _vm._v(\" \"), _c('el-button', {\n            attrs: {\n              \"type\": \"text\",\n              \"size\": \"small\"\n            },\n            on: {\n              \"click\": function($event) {\n                _vm.deleteCommodity(scope)\n              }\n            }\n          }, [_vm._v(\"删除\")])]\n        }\n      }])\n    })], 1)], 1) : _vm._e(), _vm._v(\" \"), _c('el-button', {\n      staticStyle: {\n        \"margin-top\": \"20px\"\n      },\n      attrs: {\n        \"type\": \"primary\"\n      },\n      on: {\n        \"click\": _vm.addNewCommoditiy\n      }\n    }, [_vm._v(\"添加商品\")])], 1)\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.commoditiyDetails),\n      expression: \"commoditiyDetails\"\n    }],\n    staticClass: \"commoditiy-details\",\n    staticStyle: {\n      \"width\": \"700px\",\n      \"margin-top\": \"30px\"\n    }\n  }, [_c('el-form', {\n    ref: \"ruleForm\",\n    staticClass: \"demo-ruleForm\",\n    attrs: {\n      \"model\": _vm.ruleForm,\n      \"rules\": _vm.rules,\n      \"label-width\": \"100px\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"商品名称：\",\n      \"prop\": \"name\"\n    }\n  }, [_c('el-input', {\n    staticStyle: {\n      \"width\": \"300px\"\n    },\n    attrs: {\n      \"placeholder\": \"输入商品名称\"\n    },\n    model: {\n      value: (_vm.ruleForm.name),\n      callback: function($$v) {\n        _vm.$set(_vm.ruleForm, \"name\", $$v)\n      },\n      expression: \"ruleForm.name\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    staticClass: \"commodity-img\",\n    staticStyle: {\n      \"margin-bottom\": \"20px\"\n    },\n    attrs: {\n      \"label\": \"商品图片：\",\n      \"prop\": \"img\"\n    }\n  }, [_c('el-upload', {\n    staticClass: \"avatar-uploader\",\n    attrs: {\n      \"action\": \"//up.qbox.me/\",\n      \"show-file-list\": false,\n      \"data\": _vm.uploadform,\n      \"on-success\": _vm.handleAvatarSuccess,\n      \"before-upload\": _vm.beforeAvatarUpload\n    }\n  }, [(_vm.ruleForm.img) ? _c('img', {\n    staticClass: \"avatar\",\n    attrs: {\n      \"src\": _vm.ruleForm.img\n    }\n  }) : _c('i', {\n    staticClass: \"el-icon-plus avatar-uploader-icon\"\n  })]), _vm._v(\" \"), _c('el-input', {\n    staticStyle: {\n      \"position\": \"relative\",\n      \"margin-top\": \"20px\",\n      \"width\": \"400px\"\n    },\n    attrs: {\n      \"placeholder\": \"填写图片地址\"\n    },\n    model: {\n      value: (_vm.ruleForm.img),\n      callback: function($$v) {\n        _vm.$set(_vm.ruleForm, \"img\", $$v)\n      },\n      expression: \"ruleForm.img\"\n    }\n  }), _vm._v(\" \"), _c('p', [_vm._v(\"建议上传图片大小为200*200(w*h)，且图片大小上限为1M\")])], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"商品单价：\",\n      \"prop\": \"price\"\n    }\n  }, [_c('el-input', {\n    staticStyle: {\n      \"width\": \"150px\"\n    },\n    attrs: {\n      \"placeholder\": \"输入商品单价\"\n    },\n    model: {\n      value: (_vm.ruleForm.price),\n      callback: function($$v) {\n        _vm.$set(_vm.ruleForm, \"price\", $$v)\n      },\n      expression: \"ruleForm.price\"\n    }\n  }), _vm._v(\" / 元\\n\\t\\t\\t\\t\")], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"价格单位：\",\n      \"prop\": \"unit\"\n    }\n  }, [_c('el-input', {\n    staticStyle: {\n      \"width\": \"150px\"\n    },\n    attrs: {\n      \"placeholder\": \"输入价格单位\"\n    },\n    model: {\n      value: (_vm.ruleForm.unit),\n      callback: function($$v) {\n        _vm.$set(_vm.ruleForm, \"unit\", $$v)\n      },\n      expression: \"ruleForm.unit\"\n    }\n  }), _vm._v(\"\\n\\t\\t\\t\\t\\t（件、个、瓶等等）\\n\\t\\t\\t\\t\")], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"是否上架：\",\n      \"prop\": \"putaway\"\n    }\n  }, [_c('el-switch', {\n    model: {\n      value: (_vm.ruleForm.putaway),\n      callback: function($$v) {\n        _vm.$set(_vm.ruleForm, \"putaway\", $$v)\n      },\n      expression: \"ruleForm.putaway\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.submitForm('ruleForm')\n      }\n    }\n  }, [_vm._v(\"保存\")]), _vm._v(\" \"), _c('el-button', {\n    on: {\n      \"click\": _vm.resetForm\n    }\n  }, [_vm._v(\"取消\")])], 1)], 1)], 1)], 2)], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/4.15fcaf9d66f9d5cc4a9d.js","\n/* styles */\nrequire(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-526f8f1e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./commoditySetting.vue\")\n\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./commoditySetting.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-526f8f1e\\\"}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./commoditySetting.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/hotel/commoditySetting.vue\n// module id = 535\n// module chunks = 4","<template>\n\t<section>\n\t\t<div label-width=\"80px\">\n\t\t\t<div >\n\t\t\t\t<el-input v-model=\"addCategoryName\" style=\"width:300px;\" @keyup.enter.native='addCategory' placeholder=\"请输入商品类别名称\"></el-input>\n\t\t\t\t<el-button type=\"primary\" :disabled=\"addCategoryName.length === 0\" style=\"transform: translateY(-1px);\" @click=\"addCategory\">添加类别</el-button>\n\t\t\t</div>\n\t\t</div>\n\t\t<el-tabs v-model=\"activeName2\" type=\"card\" @tab-click=\"handleClick\" @tab-remove=\"removeTab\" closable style=\"margin-top:30px;\">\n\t\t\t<el-tab-pane v-for=\"(item,index) in commodities\" :label=\"item.categoryName\" :name=\"`${index}`\" :key=\"index\">\n\t\t\t\t<div v-if=\"item.details.length > 0\" style=\"width:700px\">\n\t\t\t\t\t<el-table :data=\"item.details\" height=\"300\" border style=\"width: 100%\">\n\t\t\t\t\t\t<el-table-column prop=\"name\" label=\"商品名称\" ></el-table-column>\n\t\t\t\t\t\t<el-table-column prop=\"price\" label=\"单价\" width=\"80\"></el-table-column>\n\t\t\t\t\t\t<el-table-column prop=\"unit\" label=\"单位\" width=\"80\"></el-table-column>\n\t\t\t\t\t\t<el-table-column prop=\"putaway\" label=\"上架状态\" width=\"80\">\n\t\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t\t<div v-if=\"scope.row.putaway\">\n\t\t\t\t\t\t\t\t\t是\n\t\t\t\t\t\t\t\t\t<!-- <el-button type=\"text\" size=\"small\" style=\"margin-left:20px;\">下架</el-button> -->\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div v-else>\n\t\t\t\t\t\t\t\t\t否\n\t\t\t\t\t\t\t\t\t<!-- <el-button type=\"text\" size=\"small\" style=\"margin-left:20px;\">上架</el-button> -->\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</el-table-column>\n\t\t\t\t\t\t<el-table-column label=\"操作\" align=\"center\" width=\"120\">\n\t\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t\t<el-button @click=\"showCommodity(scope.row)\" type=\"text\" size=\"small\">查看/修改</el-button>\n\t\t\t\t\t\t\t\t<el-button @click=\"deleteCommodity(scope)\" type=\"text\" size=\"small\">删除</el-button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</el-table-column>\n\t\t\t\t\t</el-table>\n\t\t\t\t</div>\n\t\t\t\t<el-button type=\"primary\" @click=\"addNewCommoditiy\" style=\"margin-top:20px\">添加商品</el-button>\n\t\t\t</el-tab-pane>\n\t\t\t<div v-show=\"commoditiyDetails\" class=\"commoditiy-details\" style=\"width:700px;margin-top:30px;\">\n\t\t\t\t<el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\n\t\t\t\t\t<el-form-item label=\"商品名称：\" prop=\"name\">\n\t\t\t\t\t\t<el-input v-model=\"ruleForm.name\" placeholder=\"输入商品名称\" style=\"width:300px\"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"商品图片：\" prop=\"img\" class=\"commodity-img\" style=\"margin-bottom:20px;\">\n\t\t\t\t\t\t<el-upload class=\"avatar-uploader\" action=\"//up.qbox.me/\" :show-file-list=\"false\" :data=\"uploadform\" :on-success=\"handleAvatarSuccess\" :before-upload=\"beforeAvatarUpload\">\n\t\t\t\t\t\t\t<img v-if=\"ruleForm.img\" :src=\"ruleForm.img\" class=\"avatar\">\n\t\t\t\t\t\t\t<i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n\t\t\t\t\t\t</el-upload>\n\t\t\t\t\t\t<el-input v-model=\"ruleForm.img\" style=\"position:relative;margin-top:20px;width:400px;\" placeholder=\"填写图片地址\"></el-input>\n\t\t\t\t\t\t<p>建议上传图片大小为200*200(w*h)，且图片大小上限为1M</p>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"商品单价：\" prop=\"price\">\n\t\t\t\t\t\t<el-input v-model=\"ruleForm.price\" placeholder=\"输入商品单价\" style=\"width:150px\"></el-input> / 元\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"价格单位：\" prop=\"unit\">\n\t\t\t\t\t\t<el-input v-model=\"ruleForm.unit\" placeholder=\"输入价格单位\" style=\"width:150px\"></el-input>\n\t\t\t\t\t\t（件、个、瓶等等）\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"是否上架：\" prop=\"putaway\">\n\t\t\t\t\t\t<el-switch v-model=\"ruleForm.putaway\"></el-switch>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item>\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('ruleForm')\">保存</el-button>\n\t\t\t\t\t\t<el-button @click=\"resetForm\">取消</el-button>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</el-form>\n\t\t\t</div>\n\t\t\t<!-- <el-tab-pane label=\"用户管理\" name=\"1\">用户管理</el-tab-pane>\n\t\t\t<el-tab-pane label=\"配置管理\" name=\"2\">配置管理</el-tab-pane>\n\t\t\t<el-tab-pane label=\"角色管理\" name=\"3\">角色管理</el-tab-pane>\n\t\t\t<el-tab-pane label=\"定时任务补偿\" name=\"4\">定时任务补偿</el-tab-pane> -->\n\t\t</el-tabs>\n\t</section>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n\t\t\tuser:{},\n      data:{},\n\t\t\taddCategoryName:'',\n\t\t\tactiveName2: '0',\n\t\t\tcommodities: [],\n\t\t\tcommoditiyDetails: false,\n\t\t\tisAdd: true,\n\t\t\tuploadform: {\n        token: \"\"\n      },\n\t\t\truleForm:{\n\t\t\t\tname: '',\n\t\t\t\timg:'',\n\t\t\t\tprice: '',\n\t\t\t\tunit: '',\n\t\t\t\tputaway: ''\n\t\t\t},\n\t\t\trules: {\n          name: [\n            { required: true, message: '请输入商品名称', trigger: 'blur' }\n\t\t\t\t\t],\n\t\t\t\t\timg: [\n\t\t\t\t\t\t{ required: true, message: '请上传图片或填写图片地址', trigger: 'blur'}\n\t\t\t\t\t],\n\t\t\t\t\tprice: [\n            { required: true, message: '请输入商品价格', trigger: 'blur' }\n\t\t\t\t\t],\n\t\t\t\t\tunit: [\n            { required: true, message: '请输入价格单位', trigger: 'blur' }\n          ]\n        }\n    };\n\t},\n\tmethods: {\n\t\taddCategory(){\n\t\t\tlet obj = {\n\t\t\t\tcategoryName:this.addCategoryName,\n\t\t\t\tdetails:[]\n\t\t\t}\n\t\t\tthis.commodities.push(obj);\n\t\t\t\n\t\t},\n\t\tremoveTab(item){\n\t\t\tthis.$confirm('此操作将会删除该种类及其下所有商品, 是否继续?', '提示', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tlet index = item - 0;\n\t\t\t\t\tthis.commodities.splice(index,1);\n\t\t\t\t\tthis.saveData();\n\t\t\t\t}).catch(() => {\n\t\t\t});\n\t\t},\n\t\thandleClick(tab, event) {\n\t\t\tconsole.log(tab);\n\t\t\tconsole.log(this.activeName2)\n\t\t\tthis.commoditiyDetails = false;\n\t\t\tthis.isAdd = true;\n\t\t},\n\t\tshowCommodity(item){\n\t\t\tthis.ruleForm = item;\n\t\t\tthis.commoditiyDetails = true;\n\t\t\tthis.isAdd = false;\n\t\t},\n\t\tdeleteCommodity(item){\n\t\t\tlet _index = this.activeName2 - 0;\n\t\t\tlet index = item.$index;\n\t\t\t// console.log(this.commodities[_index].details)\n\n\t\t\tthis.commodities[_index].details.splice(index,1);\n\t\t\tthis.saveData();\n\t\t},\n\t\taddNewCommoditiy(){\n\t\t\tthis.resetForm();\n\t\t\tthis.commoditiyDetails = true;\n\t\t\tthis.isAdd = true;\n\t\t},\n\t\tsaveData(){\n\t\t\tthis.data.commodityList.forEach((item,index)=>{\n\t\t\t\titem.id = `${index}`,\n\t\t\t\titem.details.forEach((ite,inde)=>{\n\t\t\t\t\tite.id = `${index}-${inde}`\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.ajax.http('put', this.host.baseUrl + '/baseinfosetting', this.data, succ, error);\n\t\t\tlet _this = this;\n\t\t\tfunction succ(res){\n\t\t\t\t_this.$message({\n\t\t\t\t\tmessage: res.text,\n\t\t\t\t\ttype: 'success'\n\t\t\t\t});\n\t\t\t\t_this.commoditiyDetails = false;\n\t\t\t}\n\n\t\t\tfunction error(res){\n\t\t\t\tconsole.log(res)\n\t\t\t}\n\t\t},\n\t\tsubmitForm(formName) {\n\t\t\tthis.$refs[formName].validate((valid) => {\n\t\t\t\tif (valid) {\n\t\t\t\t\tif(this.isAdd){\n\t\t\t\t\t\tthis.commodities[this.activeName2 - 0].details.push(this.ruleForm);\n\t\t\t\t\t}\n\t\t\t\t\tthis.saveData();\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('error submit!!');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tresetForm(formName) {\n\t\t\tthis.ruleForm = {\n\t\t\t\tname: '',\n\t\t\t\timg:'',\n\t\t\t\tprice: '',\n\t\t\t\tunit: '',\n\t\t\t\tputaway: true\n\t\t\t}\n\t\t\tthis.commoditiyDetails = false;\n\t\t\tthis.isAdd = true;\n\t\t},\n\t\thandleAvatarSuccess(response, file, fileList) {\n      this.ruleForm.img = `${this.host.imgBaseUrl}${response.key}`;\n    },\n    beforeAvatarUpload(file) {\n      let isLt2M = file.size / 1024 / 1024 < 1;\n      let _this = this;\n\n      if (!isLt2M) {\n        _this.$message.error(\"上传图片大小不能超过 1MB!\");\n      } else {\n        let params = {\n          fileName: file.name\n        };\n\n        return axios\n          .get(_this.host.baseUrl + \"/uploadimg\", { params })\n          .then(res => {\n            if (res.data.code === \"1\") {\n              _this.uploadform = {\n                key: res.data.result.fileName,\n                token: res.data.result.uploadToken\n              };\n            } else {\n              _this.$message.error(\"上传图片失败\");\n            }\n          })\n          .catch(() => {\n            _this.$message.error(\"上传图片失败\");\n          });\n      }\n\n      return isLt2M;\n    },\n\t\tinit(){\n\t\t\tthis.user = JSON.parse(sessionStorage.getItem('user'));\n\t\t\tthis.ajax.http('get', this.host.baseUrl + '/baseinfosetting', {userid:this.user.userid}, succ, error);\n\t\t\tlet _this = this;\n\t\t\tfunction succ(res){\n\t\t\t\tlet data = res.data;\n\t\t\t\t_this.data = data;\n\t\t\t\t// console.log(_this.data);\n\t\t\t\tconsole.log('赋值');\n\t\t\t\t_this.commodities = data.commodityList;\n\t\t\t}\n\t\t\tfunction error(res){\n\t\t\t\tconsole.log(res);\n\t\t\t}\n\t\t\t\n\t\t}\n\t},\n  mounted() {\n    this.init();\n  }\n};\n</script>\n\n<style lang='scss'>\n.commodity-img {\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 150px;\n    height: 150px;\n    line-height: 150px;\n    text-align: center;\n\t\tborder: 1px dashed #8c939d;\n  }\n  .avatar {\n    width: 150px;\n    height: 150px;\n    display: block;\n  }\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// commoditySetting.vue?4b7f07fe","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".commodity-img .avatar-uploader-icon{font-size:28px;color:#8c939d;width:150px;height:150px;line-height:150px;text-align:center;border:1px dashed #8c939d}.commodity-img .avatar{width:150px;height:150px;display:block}\", \"\", {\"version\":3,\"sources\":[\"/Users/wei/codespace/www/hy/hotel-admin/src/views/hotel/commoditySetting.vue\"],\"names\":[],\"mappings\":\"AACA,qCACE,eAAgB,AAChB,cAAe,AACf,YAAa,AACb,aAAc,AACd,kBAAmB,AACnB,kBAAmB,AACnB,yBAA2B,CAC5B,AACD,uBACE,YAAa,AACb,aAAc,AACd,aAAe,CAChB\",\"file\":\"commoditySetting.vue\",\"sourcesContent\":[\"\\n.commodity-img .avatar-uploader-icon {\\n  font-size: 28px;\\n  color: #8c939d;\\n  width: 150px;\\n  height: 150px;\\n  line-height: 150px;\\n  text-align: center;\\n  border: 1px dashed #8c939d;\\n}\\n.commodity-img .avatar {\\n  width: 150px;\\n  height: 150px;\\n  display: block;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-526f8f1e\",\"scoped\":false,\"hasInlineConfig\":false}!./~/sass-loader/lib/loader.js?{\"sourceMap\":true}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/hotel/commoditySetting.vue\n// module id = 554\n// module chunks = 4","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-526f8f1e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./commoditySetting.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"46b0ed8c\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-526f8f1e\",\"scoped\":false,\"hasInlineConfig\":false}!./~/sass-loader/lib/loader.js?{\"sourceMap\":true}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/hotel/commoditySetting.vue\n// module id = 562\n// module chunks = 4","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('section', [_c('div', {\n    attrs: {\n      \"label-width\": \"80px\"\n    }\n  }, [_c('div', [_c('el-input', {\n    staticStyle: {\n      \"width\": \"300px\"\n    },\n    attrs: {\n      \"placeholder\": \"请输入商品类别名称\"\n    },\n    nativeOn: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13, $event.key)) { return null; }\n        _vm.addCategory($event)\n      }\n    },\n    model: {\n      value: (_vm.addCategoryName),\n      callback: function($$v) {\n        _vm.addCategoryName = $$v\n      },\n      expression: \"addCategoryName\"\n    }\n  }), _vm._v(\" \"), _c('el-button', {\n    staticStyle: {\n      \"transform\": \"translateY(-1px)\"\n    },\n    attrs: {\n      \"type\": \"primary\",\n      \"disabled\": _vm.addCategoryName.length === 0\n    },\n    on: {\n      \"click\": _vm.addCategory\n    }\n  }, [_vm._v(\"添加类别\")])], 1)]), _vm._v(\" \"), _c('el-tabs', {\n    staticStyle: {\n      \"margin-top\": \"30px\"\n    },\n    attrs: {\n      \"type\": \"card\",\n      \"closable\": \"\"\n    },\n    on: {\n      \"tab-click\": _vm.handleClick,\n      \"tab-remove\": _vm.removeTab\n    },\n    model: {\n      value: (_vm.activeName2),\n      callback: function($$v) {\n        _vm.activeName2 = $$v\n      },\n      expression: \"activeName2\"\n    }\n  }, [_vm._l((_vm.commodities), function(item, index) {\n    return _c('el-tab-pane', {\n      key: index,\n      attrs: {\n        \"label\": item.categoryName,\n        \"name\": (\"\" + index)\n      }\n    }, [(item.details.length > 0) ? _c('div', {\n      staticStyle: {\n        \"width\": \"700px\"\n      }\n    }, [_c('el-table', {\n      staticStyle: {\n        \"width\": \"100%\"\n      },\n      attrs: {\n        \"data\": item.details,\n        \"height\": \"300\",\n        \"border\": \"\"\n      }\n    }, [_c('el-table-column', {\n      attrs: {\n        \"prop\": \"name\",\n        \"label\": \"商品名称\"\n      }\n    }), _vm._v(\" \"), _c('el-table-column', {\n      attrs: {\n        \"prop\": \"price\",\n        \"label\": \"单价\",\n        \"width\": \"80\"\n      }\n    }), _vm._v(\" \"), _c('el-table-column', {\n      attrs: {\n        \"prop\": \"unit\",\n        \"label\": \"单位\",\n        \"width\": \"80\"\n      }\n    }), _vm._v(\" \"), _c('el-table-column', {\n      attrs: {\n        \"prop\": \"putaway\",\n        \"label\": \"上架状态\",\n        \"width\": \"80\"\n      },\n      scopedSlots: _vm._u([{\n        key: \"default\",\n        fn: function(scope) {\n          return [(scope.row.putaway) ? _c('div', [_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t是\\n\\t\\t\\t\\t\\t\\t\\t\\t\")]) : _c('div', [_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t否\\n\\t\\t\\t\\t\\t\\t\\t\\t\")])]\n        }\n      }])\n    }), _vm._v(\" \"), _c('el-table-column', {\n      attrs: {\n        \"label\": \"操作\",\n        \"align\": \"center\",\n        \"width\": \"120\"\n      },\n      scopedSlots: _vm._u([{\n        key: \"default\",\n        fn: function(scope) {\n          return [_c('el-button', {\n            attrs: {\n              \"type\": \"text\",\n              \"size\": \"small\"\n            },\n            on: {\n              \"click\": function($event) {\n                _vm.showCommodity(scope.row)\n              }\n            }\n          }, [_vm._v(\"查看/修改\")]), _vm._v(\" \"), _c('el-button', {\n            attrs: {\n              \"type\": \"text\",\n              \"size\": \"small\"\n            },\n            on: {\n              \"click\": function($event) {\n                _vm.deleteCommodity(scope)\n              }\n            }\n          }, [_vm._v(\"删除\")])]\n        }\n      }])\n    })], 1)], 1) : _vm._e(), _vm._v(\" \"), _c('el-button', {\n      staticStyle: {\n        \"margin-top\": \"20px\"\n      },\n      attrs: {\n        \"type\": \"primary\"\n      },\n      on: {\n        \"click\": _vm.addNewCommoditiy\n      }\n    }, [_vm._v(\"添加商品\")])], 1)\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.commoditiyDetails),\n      expression: \"commoditiyDetails\"\n    }],\n    staticClass: \"commoditiy-details\",\n    staticStyle: {\n      \"width\": \"700px\",\n      \"margin-top\": \"30px\"\n    }\n  }, [_c('el-form', {\n    ref: \"ruleForm\",\n    staticClass: \"demo-ruleForm\",\n    attrs: {\n      \"model\": _vm.ruleForm,\n      \"rules\": _vm.rules,\n      \"label-width\": \"100px\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"商品名称：\",\n      \"prop\": \"name\"\n    }\n  }, [_c('el-input', {\n    staticStyle: {\n      \"width\": \"300px\"\n    },\n    attrs: {\n      \"placeholder\": \"输入商品名称\"\n    },\n    model: {\n      value: (_vm.ruleForm.name),\n      callback: function($$v) {\n        _vm.$set(_vm.ruleForm, \"name\", $$v)\n      },\n      expression: \"ruleForm.name\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    staticClass: \"commodity-img\",\n    staticStyle: {\n      \"margin-bottom\": \"20px\"\n    },\n    attrs: {\n      \"label\": \"商品图片：\",\n      \"prop\": \"img\"\n    }\n  }, [_c('el-upload', {\n    staticClass: \"avatar-uploader\",\n    attrs: {\n      \"action\": \"//up.qbox.me/\",\n      \"show-file-list\": false,\n      \"data\": _vm.uploadform,\n      \"on-success\": _vm.handleAvatarSuccess,\n      \"before-upload\": _vm.beforeAvatarUpload\n    }\n  }, [(_vm.ruleForm.img) ? _c('img', {\n    staticClass: \"avatar\",\n    attrs: {\n      \"src\": _vm.ruleForm.img\n    }\n  }) : _c('i', {\n    staticClass: \"el-icon-plus avatar-uploader-icon\"\n  })]), _vm._v(\" \"), _c('el-input', {\n    staticStyle: {\n      \"position\": \"relative\",\n      \"margin-top\": \"20px\",\n      \"width\": \"400px\"\n    },\n    attrs: {\n      \"placeholder\": \"填写图片地址\"\n    },\n    model: {\n      value: (_vm.ruleForm.img),\n      callback: function($$v) {\n        _vm.$set(_vm.ruleForm, \"img\", $$v)\n      },\n      expression: \"ruleForm.img\"\n    }\n  }), _vm._v(\" \"), _c('p', [_vm._v(\"建议上传图片大小为200*200(w*h)，且图片大小上限为1M\")])], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"商品单价：\",\n      \"prop\": \"price\"\n    }\n  }, [_c('el-input', {\n    staticStyle: {\n      \"width\": \"150px\"\n    },\n    attrs: {\n      \"placeholder\": \"输入商品单价\"\n    },\n    model: {\n      value: (_vm.ruleForm.price),\n      callback: function($$v) {\n        _vm.$set(_vm.ruleForm, \"price\", $$v)\n      },\n      expression: \"ruleForm.price\"\n    }\n  }), _vm._v(\" / 元\\n\\t\\t\\t\\t\")], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"价格单位：\",\n      \"prop\": \"unit\"\n    }\n  }, [_c('el-input', {\n    staticStyle: {\n      \"width\": \"150px\"\n    },\n    attrs: {\n      \"placeholder\": \"输入价格单位\"\n    },\n    model: {\n      value: (_vm.ruleForm.unit),\n      callback: function($$v) {\n        _vm.$set(_vm.ruleForm, \"unit\", $$v)\n      },\n      expression: \"ruleForm.unit\"\n    }\n  }), _vm._v(\"\\n\\t\\t\\t\\t\\t（件、个、瓶等等）\\n\\t\\t\\t\\t\")], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"是否上架：\",\n      \"prop\": \"putaway\"\n    }\n  }, [_c('el-switch', {\n    model: {\n      value: (_vm.ruleForm.putaway),\n      callback: function($$v) {\n        _vm.$set(_vm.ruleForm, \"putaway\", $$v)\n      },\n      expression: \"ruleForm.putaway\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.submitForm('ruleForm')\n      }\n    }\n  }, [_vm._v(\"保存\")]), _vm._v(\" \"), _c('el-button', {\n    on: {\n      \"click\": _vm.resetForm\n    }\n  }, [_vm._v(\"取消\")])], 1)], 1)], 1)], 2)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-526f8f1e\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/hotel/commoditySetting.vue\n// module id = 571\n// module chunks = 4"],"sourceRoot":""}