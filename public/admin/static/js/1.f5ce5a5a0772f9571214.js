webpackJsonp([1],{538:function(e,t,r){r(564);var i=r(67)(r(546),r(573),null,null);e.exports=i.exports},546:function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(140),s=i(n),o=r(548),a=i(o);t.default={data:function(){var e=this;return{data:{},user:{},alreadyHadPrinter:[],printersConfig:[],formShow:!1,isAdd:!0,brand:0,ruleForm:{},rules:{brand:[{required:!0,message:"请输入活动名称",trigger:"blur"}],deviceNo:[{required:!0,validator:function(t,r,i){for(var n=e.data.printers,s=n.length,o=0;o<s;o++)if(e.isAdd&&n[o].brand===e.ruleForm.brand&&n[o].deviceNo===r)return void i(new Error("已有同一个机器，请查证后再输入"));i()},trigger:"blur"}],key:[{required:!0,message:"请输入密钥",trigger:"blur"}]}}},methods:{changePrinterBrand:function(){this.ruleForm=JSON.parse((0,s.default)(this.printersConfig[this.brand]))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var r=function(e){console.log(e),s.$message({message:n,type:"success"}),s.resetForm()},i=function(e){console.log(e)},n="修改成功！";t.isAdd&&(t.data.printers.push(t.ruleForm),n="添加成功"),t.ajax.http("put",t.host.baseUrl+"/baseinfosetting",t.data,r,i);var s=t})},toggleForm:function(e){this.formShow=e,e||(this.isAdd=!0)},resetForm:function(){this.brand=0,this.ruleForm=JSON.parse((0,s.default)(this.printersConfig[this.brand])),this.toggleForm(!1)},showPrinter:function(e){console.log(e),this.ruleForm=this.data.printers[e.$index],this.toggleForm(!0),this.isAdd=!1},addPrinter:function(){this.brand=0,this.isAdd=!0,this.ruleForm=JSON.parse((0,s.default)(this.printersConfig[this.brand])),this.toggleForm(!0)},deletePrinter:function(e){function t(e){console.log(e),i.$message({message:"删除成功",type:"success"}),i.resetForm()}function r(e){console.log(e)}this.data.printers.splice(e.$index,1),this.ajax.http("put",this.host.baseUrl+"/baseinfosetting",this.data,t,r);var i=this},init:function(){function e(e){var t=e.data;r.data=t,console.log(r.data),console.log("赋值"),r.alreadyHadPrinter=t.printers}function t(e){console.log(e)}this.user=JSON.parse(sessionStorage.getItem("user")),this.ajax.http("get",this.host.baseUrl+"/baseinfosetting",{userid:this.user.userid},e,t);var r=this}},mounted:function(){this.init(),this.printersConfig.push(a.default),this.changePrinterBrand()}}},548:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={brand:"365",deviceNo:"",key:"",times:1,urls:{addOrder:"http://open.printcenter.cn:8080/addOrder",queryOrder:"http://open.printcenter.cn:8080/queryOrder",queryPrinterStatus:"http://open.printcenter.cn:8080/queryPrinterStatus"}};t.default=i},556:function(e,t,r){t=e.exports=r(530)(),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"printerSetting.vue",sourceRoot:""}])},564:function(e,t,r){var i=r(556);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);r(531)("74dcfc64",i,!0)},573:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticStyle:{width:"600px"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.alreadyHadPrinter,"max-height":"300",border:""}},[r("el-table-column",{attrs:{prop:"brand",label:"品牌"}}),e._v(" "),r("el-table-column",{attrs:{prop:"deviceNo",label:"设备编号"}}),e._v(" "),r("el-table-column",{attrs:{prop:"times",label:"打印联数"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){e.showPrinter(t)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){e.deletePrinter(t)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),r("div",{staticClass:"addNewPrintter",staticStyle:{"margin-top":"30px"}},[r("el-button",{attrs:{type:"primary"},on:{click:e.addPrinter}},[e._v("添加新打印机")]),e._v(" "),r("el-form",{directives:[{name:"show",rawName:"v-show",value:e.formShow,expression:"formShow"}],ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{"margin-top":"30px"},attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"选择品牌:"}},[r("el-select",{attrs:{placeholder:"选择打印机品牌"},on:{change:e.changePrinterBrand},model:{value:e.brand,callback:function(t){e.brand=t},expression:"brand"}},e._l(e.printersConfig,function(e,t){return r("el-option",{key:t,attrs:{label:e.brand,value:t}})}))],1),e._v(" "),0===e.brand?r("el-form-item",{attrs:{label:"设备编号:",prop:"deviceNo"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入设备编号（deviceNo、机器号）"},model:{value:e.ruleForm.deviceNo,callback:function(t){e.$set(e.ruleForm,"deviceNo",t)},expression:"ruleForm.deviceNo"}})],1):e._e(),e._v(" "),0===e.brand?r("el-form-item",{attrs:{label:"设备密钥:",prop:"key"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入设备密钥（key、密钥）"},model:{value:e.ruleForm.key,callback:function(t){e.$set(e.ruleForm,"key",t)},expression:"ruleForm.key"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"打印联数:"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入打印联数（key）"},model:{value:e.ruleForm.times,callback:function(t){e.$set(e.ruleForm,"times",t)},expression:"ruleForm.times"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),r("el-button",{on:{click:e.resetForm}},[e._v("取消")])],1)],1)],1)])},staticRenderFns:[]}}});
//# sourceMappingURL=1.f5ce5a5a0772f9571214.js.map