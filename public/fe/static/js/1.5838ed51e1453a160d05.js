webpackJsonp([1],{"/vwY":function(e,t){},vqEv:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"order",data:function(){return{shoppingCar:{},room:0,price:0,loading:!1,btnShow:!0,remark:"",successContent:""}},methods:{submit:function(){var e=this,t=[];this.shoppingCar.details.forEach(function(e,s){var a={};a.name=e.name,a.price=e.price,a.unit=e.unit,a.num=e.num,t.push(a)});var s=new Date,a={userid:this.$route.query.userid,room:this.room,orderNum:""+s.getFullYear()+(s.getMonth()<9?"0"+(s.getMonth()+1):s.getMonth()+1)+(s.getDate()<10?"0"+s.getDate():s.getDate())+(s.getHours()<10?"0"+s.getHours():s.getHours())+(s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes())+(s.getSeconds()<10?"0"+s.getSeconds():s.getSeconds()),orderContent:{list:t,remark:this.remark,totalPrice:this.price},printers:JSON.parse(sessionStorage.getItem("printer"))};this.loading=!0,this.axios({method:"post",baseURL:this.host.baseUrl,url:"/order",data:a}).then(function(t){e.loading=!1,e.btnShow=!1,e.$createDialog({type:"alert",showClose:!0,title:"提交成功",content:e.successContent,onClose:function(){console.log("close")}}).show()})}},mounted:function(){var e=this;this.shoppingCar=JSON.parse(sessionStorage.getItem("shoppingCar")),this.room=this.$route.query.room,this.successContent=sessionStorage.getItem("marked")+'如有任何疑问，请拨打前台电话<a href="tel:'+this.$route.query.tel+'">'+this.$route.query.tel+"（点击即可拨打）</a>进行询问",this.shoppingCar.details.forEach(function(t,s){e.price+=t.num*t.price})}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"order"},[s("div",{staticClass:"bg"},[s("p",{staticClass:"title"},[e._v("确认订单")]),e._v(" "),s("p",{staticClass:"room"},[e._v("房间号:  "),s("span",[e._v(e._s(e.room))])]),e._v(" "),s("ul",{staticClass:"list"},[s("p",{staticClass:"shopping-list"},[e._v("购物单: "),s("span",[e._v(e._s(e.shoppingCar.text))])]),e._v(" "),e._l(e.shoppingCar.details,function(t,a){return s("li",{key:a},[s("span",{staticClass:"name"},[e._v(e._s(t.name))]),e._v(" "),s("span",{staticClass:"num"},[e._v("x"+e._s(t.num))]),e._v(" "),s("span",{staticClass:"price"},[e._v("￥"+e._s(t.price))])])}),e._v(" "),s("p",{staticClass:"all-price"},[e._v("总计： ￥"+e._s(e.price))])],2),e._v(" "),s("div",{staticClass:"remarks"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.remark,expression:"remark"}],attrs:{placeholder:"备注"},domProps:{value:e.remark},on:{input:function(t){t.target.composing||(e.remark=t.target.value)}}}),e._v(" "),s("cube-button",{directives:[{name:"show",rawName:"v-show",value:e.btnShow,expression:"btnShow"}],on:{click:e.submit}},[e._v("确认下单")]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:!e.btnShow,expression:"!btnShow"}],staticClass:"finish"},[e._v("下单完成")])],1)]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"loading"},[s("cube-loading",{attrs:{size:40}})],1)])},staticRenderFns:[]};var i=s("VU/8")(a,r,!1,function(e){s("/vwY")},null,null);t.default=i.exports}});
//# sourceMappingURL=1.5838ed51e1453a160d05.js.map